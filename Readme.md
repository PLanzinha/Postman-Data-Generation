# Project 3: Postman Data Generation

In this project, I wanted to explore using some JavaScript libraries already built within Postman for some more complex tasks. 
Instead of using static files like in the other two projects, another goal of this project was to generate more varied test data directly in the scripts

**Goals:**
*   To try using bundled JavaScript libraries like Moment.js for dates and Lodash for data utilities.
*   To generate unique and dynamic test data on-the-fly using Postman's built-in dynamic variables such as `{{$randomFirstName}}`, combined with JavaScript.
*   To practice setting request bodies programmatically with `pm.request.body.update()` for better control.
*   To write tests that could handle and validate this dynamically generated and manipulated data.

**APIs I Used:**
*   Postman Echo: `https://postman-echo.com`
*   ReqRes.in: `https://reqres.in/api`
    Both were configured using base URLs in the `P5 Shared Env`.

**My Results:**
*   **Moment.js Task:** I successfully used Moment.js for date generation and validation. This required a workaround: I manually loaded the Moment.js library from a CDN in the pre-request script because the version bundled with my local Postman desktop app was not directly accessible.
*   **Lodash Task:** I faced similar issues accessing the bundled Lodash library. To achieve the data transformation goal, I successfully refactored the task to use native JavaScript array methods like `filter` and `map`, which was a good exercise.
*   **Dynamic Data for ReqRes Task:** This part worked perfectly. I dynamically generated user data using Postman variables and JavaScript, then POSTed it to ReqRes.in and validated the response.
*   Using `pm.request.body.update()` proved to be a reliable method for setting request bodies from scripts.

**Problems I Faced:**
*   The main challenge was the unexpected difficulty accessing bundled Moment.js and Lodash libraries in my Postman desktop sandbox; they threw `ReferenceError` or `TypeError`.
*   **Workarounds Implemented:**
    *   For Moment.js: I used `pm.sendRequest()` and `new Function()` to fetch and execute the library from a CDN.
    *   For Lodash: I chose to re-implement the needed transformations using plain JavaScript.
*   This project showed that while Postman bundles useful libraries, environment-specific issues can occur. Knowing how to find workarounds or use native JS alternatives is important. The tasks using Postman's native dynamic variables worked without any problems.

### Test Cases Used for Project 3

**Test Suite:** P3 - Postman Data Generation

**Note:** I faced issues with my local Postman sandbox, so the bundled `moment` and `lodash` libraries needed workarounds.

| ID | Title | Preconditions | Steps | Expected Results |
| :- | :- | :- | :- | :- |
| **P5-001** | Verify date manipulation using manually loaded `moment.js` | - `P5 Shared Env` is active.<br>- `echoBaseUrl` is set. | 1. Pre-request script uses `pm.sendRequest` to load Moment.js from a CDN.<br>2. It uses `moment()` to generate and format various dates.<br>3. It constructs a JSON payload and uses `pm.request.body.update()` to set it.<br>4. Send `POST` to `{{echoBaseUrl}}/post`. | 1. Status is `200 OK`.<br>2. `json` field in the response contains the payload.<br>3. All date fields in the response match the values and formats generated by the pre-request script. |
| **P5-002** | Verify data transformation with plain JavaScript | - `P5 Shared Env` is active.<br>- `echoBaseUrl` is set. | 1. Pre-request script defines a user data array.<br>2. It uses native JS array methods like `.filter` and `.map` to transform the data.<br>3. It constructs a summary payload and uses `pm.request.body.update()` to set it.<br>4. Send `POST` to `{{echoBaseUrl}}/post`. | 1. Status is `200 OK`.<br>2. `json` field in the response contains the payload.<br>3. All fields in the response match the data transformed by the pre-request script. |
| **P5-003** | Verify on-the-fly user data generation | - `P5 Shared Env` is active.<br>- `reqresBaseUrl` is set. | 1. Pre-request script uses Postman's dynamic variables like `{{$randomFirstName}}` to generate a user's name and job.<br>2. It constructs a JSON payload for user creation.<br>3. Send `POST` to `{{reqresBaseUrl}}/users` with this payload. | 1. Status is `201 Created`.<br>2. `name` and `job` in the response match the dynamically generated values.<br>3. The response contains an `id` and `createdAt` timestamp. |